!function(Q){var I={};function F(U){if(I[U])return I[U].exports;var B=I[U]={i:U,l:!1,exports:{}};return Q[U].call(B.exports,B,B.exports,F),B.l=!0,B.exports}F.m=Q,F.c=I,F.d=function(Q,I,U){F.o(Q,I)||Object.defineProperty(Q,I,{enumerable:!0,get:U})},F.r=function(Q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})},F.t=function(Q,I){if(1&I&&(Q=F(Q)),8&I)return Q;if(4&I&&"object"==typeof Q&&Q&&Q.__esModule)return Q;var U=Object.create(null);if(F.r(U),Object.defineProperty(U,"default",{enumerable:!0,value:Q}),2&I&&"string"!=typeof Q)for(var B in Q)F.d(U,B,function(I){return Q[I]}.bind(null,B));return U},F.n=function(Q){var I=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(I,"a",I),I},F.o=function(Q,I){return Object.prototype.hasOwnProperty.call(Q,I)},F.p="",F(F.s=0)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./src/punto.ts\nclass Punto {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    equals(comparador) {\n        return this.x == comparador.x && this.y == comparador.y;\n    }\n    distancia(comparador) {\n        return Math.sqrt(Math.pow(this.x - comparador.x, 2) +\n            Math.pow(this.y - comparador.y, 2));\n    }\n}\n\n// CONCATENATED MODULE: ./src/torre.ts\nclass Torre {\n    constructor(_posicion, _rango, _tipoAtaque) {\n        this._posicion = _posicion;\n        this._rango = _rango;\n        this._tipoAtaque = _tipoAtaque;\n    }\n    get posicion() { return this._posicion; }\n    observar(monstruos) {\n        const enRango = (p) => p.distancia(this._posicion) >= this._rango;\n        const objetivo = monstruos\n            .filter(m => m.estaVivo)\n            .find(m => enRango(m.posicion));\n        this.cambiarObjetivo(objetivo);\n    }\n    cambiarObjetivo(nuevoObjetivo) {\n        this._objetivo = nuevoObjetivo;\n        if (nuevoObjetivo == null) {\n            this.detenerAtaque();\n            return;\n        }\n        this.comenzarAtaque();\n    }\n    comenzarAtaque() {\n        this.detenerAtaque();\n        this._idIntervaloAtaque = setInterval(() => this.atacarObjetivo(), this._tipoAtaque.cadenciaDeTiro);\n    }\n    detenerAtaque() {\n        clearInterval(this._idIntervaloAtaque);\n    }\n    atacarObjetivo() {\n        this._objetivo.recibirDanio(this._tipoAtaque.fuerza);\n        if (this._objetivo.vida <= 0) {\n            this.detenerAtaque();\n        }\n    }\n}\n\n// CONCATENATED MODULE: ./src/config.ts\nconst gameConfig = {\n    intervalo: 1000,\n    oleadas: [\n        { velocidad: 1, vida: 7, cantidad: 10 },\n        { velocidad: 1, vida: 9, cantidad: 12 }\n    ],\n    vidaJugador: 10\n};\n\n// CONCATENATED MODULE: ./src/monstruo.ts\n\n\nclass monstruo_Monstruo {\n    constructor(_velocidad, //celdas por frame\n    _vida, _camino /*secuencia de puntos ordenados\n                                que forman el camino*/) {\n        this._velocidad = _velocidad;\n        this._vida = _vida;\n        this._camino = _camino;\n        this._indicePosicion = 0;\n        this._posicion = this._camino[0];\n        this._ataca = false;\n    }\n    get estaVivo() { return this.vida > 0; }\n    get vida() {\n        return this._vida;\n    }\n    comenzarMovimiento() {\n        clearInterval(this._idIntervaloMovimiento);\n        this._idIntervaloMovimiento = setInterval(() => this.mover(), gameConfig.intervalo //1 fps\n        );\n    }\n    recibirDanio(danio) {\n        this._vida -= danio;\n        if (this._vida <= 0) {\n            this.morir();\n        }\n    }\n    get posicion() {\n        return this._posicion;\n    }\n    get ataca() {\n        return this._ataca;\n    }\n    mover() {\n        this._indicePosicion += this._velocidad;\n        if (this._indicePosicion >= this._camino.length) { //final del camino\n            this.morir();\n            this._ataca = true;\n            return;\n        }\n        this._posicion = this._camino[this._indicePosicion];\n    }\n    morir() {\n        clearInterval(this._idIntervaloMovimiento);\n        this._posicion = new Punto(-1, -1); /*Room of Doom\n                                            Sale de pantalla\n                                            Falta metodo de impresion\n                                            en pantalla.\n                                            Con observable supongo.*/\n    }\n}\n\n// CONCATENATED MODULE: ./src/tipoAtaque.ts\nclass TipoAtaque {\n    constructor(fuerza, cadenciaDeTiro) {\n        this.fuerza = fuerza;\n        this.cadenciaDeTiro = cadenciaDeTiro;\n    }\n}\n\n// CONCATENATED MODULE: ./src/escena.ts\nclass Escena {\n    constructor() {\n        this._contenedor = document.createElement('div');\n        this._contenedor.style.border = \"1px solid black\";\n        this._contenedor.style.display = 'inline-block';\n        this._contenedor.style.whiteSpace = 'pre';\n        this._contenedor.style.fontFamily = 'monospace';\n        document.body.innerHTML = '';\n        document.body.append(this._contenedor);\n    }\n    dibujarEscena(mapa, monstruos, torres) {\n        let tablero = this.dibujarCamino(mapa);\n        tablero = this.dibujarMonstruos(tablero, monstruos);\n        tablero = this.dibujarTorres(tablero, torres);\n        this.imprimirEscena(tablero);\n    }\n    dibujarCamino(mapa) {\n        const parse = x => x == 0 ? '■' : ' ';\n        return mapa.map(x => x.map(parse));\n    }\n    dibujarTorres(tablero, torres) {\n        const parse = t => 'T';\n        let nuevoTablero = [...tablero];\n        torres.forEach(t => {\n            try {\n                nuevoTablero[t.posicion.y][t.posicion.x] = parse(t);\n            }\n            catch (_a) {\n                console.warn('torre no pudo ser dibujada', t);\n            }\n        });\n        return nuevoTablero;\n    }\n    dibujarMonstruos(tablero, monstruos) {\n        const parse = m => m.vida.toString();\n        let nuevoTablero = [...tablero];\n        monstruos.forEach(m => {\n            try {\n                nuevoTablero[m.posicion.y][m.posicion.x] = parse(m);\n            }\n            catch (_a) {\n                console.warn('monstruo no pudo ser dibujado', m);\n            }\n        });\n        return nuevoTablero;\n    }\n    imprimirEscena(tablero) {\n        this._contenedor.innerText = tablero.map(fila => fila.join('')).join('\\n');\n        console.log(tablero.map(fila => fila.join('')).join('\\n'));\n    }\n}\n\n// CONCATENATED MODULE: ./src/juego.ts\n\n\n\n\n\n\n//=======COLECCION DE MAPAS=========================\n// let mapa2 = [\n//             ['S','-','S','-','-','-','-','-','-','-','-','-','-','S','-','-','-']\n//            ,['S','-','S','S','S','S','-','-','-','-','-','-','-','S','-','-','-']\n//            ,['S','-','-','-','-','S','S','-','-','-','-','-','S','S','S','S','-']\n//            ,['S','S','S','S','-','-','S','-','-','-','-','-','S','-','-','S','-']\n//            ,['-','-','-','S','S','S','S','-','-','-','-','-','S','-','-','S','-']\n//            ,['-','-','-','-','-','-','S','S','S','S','S','S','S','-','-','S','-']\n//            ,['-','S','S','S','S','-','-','-','S','-','-','-','-','-','S','S','-']\n//            ,['-','S','-','-','S','-','-','-','S','-','-','-','-','S','S','-','-']\n//            ,['-','S','-','-','S','S','-','-','S','-','-','-','S','S','-','-','-']\n//            ,['-','S','-','-','-','S','-','-','S','S','S','S','S','-','-','-','-']\n//            ,['-','S','-','-','-','S','S','S','S','-','-','-','-','-','-','-','-']\n//         ];\n// let mapa1 = [\n//             ['S01','---','---','---','---','---'],\n//             ['S02','S03','S04','S05','S06','S07'],\n//             ['---','---','---','---','---','S08'],\n//             ['S15','S14','S12','S11','S10','S09'],\n//             ['S16','---','---','---','---','---'],\n//             ['S17','---','---','---','---','---'],\n//             ['S18','S19','S20','S21','S22','S23'],\n//             ['---','---','---','---','---','S24'],\n//             ['---','---','---','---','---','S25'],\n//             ['---','---','---','---','---','S26'],\n//             ['S32','S31','S30','S29','S28','S27'],\n//             ['S33','---','---','---','---','---'],\n//         ];\nlet mapa3 = [\n    [1, 2, 3, 4],\n    [0, 0, 0, 5],\n    [9, 8, 7, 6]\n];\n//============JUEGO===================================\nclass juego_Juego {\n    constructor(mapa) {\n        this._oleada = 0;\n        this._torres = [];\n        this._monstruos = [];\n        this._camino = [];\n        this._vida = gameConfig.vidaJugador;\n        this._mapa = mapa;\n        this.init();\n        this._escena = new Escena();\n    }\n    init() {\n        this.leerCamino();\n        //this.crearTorre(new Punto(1, 0), 2, new TipoAtaque(3, 500));\n        this.crearTorre(new Punto(1, 1), 2, new TipoAtaque(3, 500));\n        this.comenzarOleada();\n    }\n    comenzarOleada() {\n        this.crearOleada();\n        this.comenzarMovimiento();\n    }\n    crearOleada() {\n        const datos = gameConfig.oleadas[this._oleada];\n        for (let i = 0; i < datos.cantidad; i++) {\n            this.crearMonstruo(datos.velocidad, datos.vida, this._camino);\n        }\n    }\n    comenzarMovimiento() {\n        let indiceMonstruo = 0;\n        let idInterval = setInterval(() => {\n            if (indiceMonstruo < this._monstruos.length) {\n                this._monstruos[indiceMonstruo].comenzarMovimiento();\n                indiceMonstruo++;\n            }\n            this.notificarTorres();\n            let todosMuertos = this._monstruos\n                .reduce((acc, curr) => acc = acc && !curr.estaVivo, true);\n            let danio = this._monstruos\n                .reduce((acc, curr) => {\n                return curr.ataca ? acc++ : acc;\n            }, 0); /*cuantos monstruos atacaron,\n                    cada monstruo aplica 1 de danio*/\n            this.recibirDanio(danio);\n            if (todosMuertos) {\n                clearInterval(idInterval);\n                if (this._oleada < gameConfig.oleadas.length) {\n                    this._oleada++;\n                    this.comenzarOleada();\n                }\n                else {\n                    this.terminarJuego(true);\n                }\n            }\n            this._escena.dibujarEscena(this._mapa, this._monstruos, this._torres);\n            console.log(this._vida.toString());\n            console.log(this._camino);\n        }, gameConfig.intervalo);\n    }\n    recibirDanio(danio) {\n        this._vida -= danio;\n        if (this._vida <= 0) {\n            this.terminarJuego(false);\n        }\n    }\n    terminarJuego(victoria) { console.log('JUEGO TERMINADO'); }\n    ;\n    notificarTorres() {\n        this._torres.forEach(t => t.observar(this._monstruos));\n    }\n    muestraMapa() {\n        //Por implementar, dibujar monstruos y torres\n        document.body.innerHTML = '';\n        for (let row of this._mapa) {\n            for (let col of row) {\n                if (col === 0) {\n                    document.write('-');\n                }\n                else {\n                    document.write(' ');\n                }\n            }\n            document.write(\"<br />\");\n        }\n    }\n    leerCamino() {\n        let x = 0;\n        let y = 0;\n        for (let row of this._mapa) {\n            for (let col of row) {\n                if (col === (this._camino.length + 1)) {\n                    this._camino.push(new Punto(x, y));\n                    this.leerCamino();\n                }\n                x++;\n            }\n            y++;\n        }\n        /* mira el mapa y ve cual es el camino, asi podemos tener\n        una coleccion de mapas y solo cambiar de mapa, y asi\n        puede haber un diseñador de mapas que no necesita\n        saber nada del resto del codigo\n\n        this._camino = []; //Vacia el array, por si las moscas\n        let x = -1;\n        let y = -1;\n        let previo = 0; /* se refiere al valor tipo number\n        contenido en la casilla anterior. Los numeros\n        mayores a 0 indican correspondencia a camino\n        y su indice\n\n        for (let row of this._mapa) {\n            y++;\n\n            for (let col of row) {\n                x++;\n\n                if (col != 0) {\n                    // ¿es != o !==?, digo por lo de === envez de ==.\n\n                    if (col > previo) {\n                        this._camino.push(new Punto(x, y));\n                    }\n                    else if (col < previo) {\n                        this._camino.unshift(new Punto(x, y));\n                    }\n                    else {\n                        return Error; /* ¿Que hace esto realmente?\n                        Mi intencion es que simplemente avise que algo\n                        esta mal para que lo revisemos\n                    }\n                }\n            }\n        }*/\n    }\n    crearTorre(pos, rango, tipoAtaque) {\n        let torre = new Torre(pos, rango, tipoAtaque);\n        this._torres.push(torre);\n    }\n    crearMonstruo(velocidad, vida, camino) {\n        let monstruo = new monstruo_Monstruo(velocidad, vida, camino);\n        this._monstruos.push(monstruo);\n    }\n}\n\n// CONCATENATED MODULE: ./src/main.ts\n\n/*const e = new Escena();\n\n(window as any).escena = e;\n\n*/\nconst main_mapa = [\n    [1, 2, 3, 4],\n    [0, 0, 0, 5],\n    [9, 8, 7, 6]\n];\nlet juego = new juego_Juego(main_mapa);\n/*\nconst caminoDePuntos = [];\nfor (let i = 0; i < camino.length; i++) {\n    for (let j = 0; j < camino[i].length; j++) {\n        const element = camino[i][j]\n        if (element != 0) {\n            caminoDePuntos.push(new Punto(i, j));\n        }\n    }\n}\n\nconst torre = new Torre(new Punto(1,1), 3, new TipoAtaque(5, 444));\n\nconst monstruo = new Monstruo(1, 4, caminoDePuntos);\n\ne.dibujarEscena(camino, [monstruo], [torre]);*/\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvcHVudG8udHM/ZGI4YSIsIndlYnBhY2s6Ly8vLi9zcmMvdG9ycmUudHM/ODdhZiIsIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnLnRzP2Q3MGIiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vbnN0cnVvLnRzP2Q0NjgiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RpcG9BdGFxdWUudHM/OWU4ZiIsIndlYnBhY2s6Ly8vLi9zcmMvZXNjZW5hLnRzPzI5NjMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2p1ZWdvLnRzPzJiOGYiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHM/Y2Q0OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBTyxNQUFNLEtBQUs7SUFDZCxZQUNXLENBQVMsRUFDVCxDQUFTO1FBRFQsTUFBQyxHQUFELENBQUMsQ0FBUTtRQUNULE1BQUMsR0FBRCxDQUFDLENBQVE7SUFBRyxDQUFDO0lBRWpCLE1BQU0sQ0FBQyxVQUFpQjtRQUMzQixPQUFPLElBQUksQ0FBQyxDQUFDLElBQUksVUFBVSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVNLFNBQVMsQ0FBQyxVQUFpQjtRQUM5QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQ1osSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLFVBQVUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUNyQyxDQUFDO0lBQ04sQ0FBQztDQUNKOzs7QUNYTSxNQUFNLEtBQUs7SUFDZCxZQUNZLFNBQWdCLEVBQ2hCLE1BQWMsRUFDZCxXQUF1QjtRQUZ2QixjQUFTLEdBQVQsU0FBUyxDQUFPO1FBQ2hCLFdBQU0sR0FBTixNQUFNLENBQVE7UUFDZCxnQkFBVyxHQUFYLFdBQVcs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Q0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLENBQUM7SUFDVCxDQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQztDQUNaLENBQUM7QUFFRixJQUFJLEtBQUssR0FBRyxJQUFJLFdBQUssQ0FBQyxTQUFJLENBQUMsQ0FBQztBQUU1Qjs7Ozs7Ozs7Ozs7Ozs7OytDQWUrQyIsImZpbGUiOiIwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFB1bnRvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIHg6IG51bWJlcixcbiAgICAgICAgcHVibGljIHk6IG51bWJlcikge31cblxuICAgIHB1YmxpYyBlcXVhbHMoY29tcGFyYWRvcjogUHVudG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueCA9PSBjb21wYXJhZG9yLnggJiYgdGhpcy55ID09IGNvbXBhcmFkb3IueTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzdGFuY2lhKGNvbXBhcmFkb3I6IFB1bnRvKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoXG4gICAgICAgICAgICBNYXRoLnBvdyh0aGlzLnggLSBjb21wYXJhZG9yLngsIDIpICsgXG4gICAgICAgICAgICBNYXRoLnBvdyh0aGlzLnkgLSBjb21wYXJhZG9yLnksIDIpXG4gICAgICAgICk7XG4gICAgfVxufSIsImltcG9ydCB7IFB1bnRvIH0gZnJvbSBcIi4vcHVudG9cIjtcbmltcG9ydCB7IE1vbnN0cnVvIH0gZnJvbSBcIi4vbW9uc3RydW9cIjtcbmltcG9ydCB7IFRpcG9BdGFxdWUgfSBmcm9tIFwiLi90aXBvQXRhcXVlXCI7XG5cbmV4cG9ydCBjbGFzcyBUb3JyZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3Bvc2ljaW9uOiBQdW50byxcbiAgICAgICAgcHJpdmF0ZSBfcmFuZ286IG51bWJlcixcbiAgICAgICAgcHJpdmF0ZSBfdGlwb0F0YXF1ZTogVGlwb0F0YXF1ZSkge31cbiAgICBcbiAgICBwcml2YXRlIF9vYmpldGl2bzogTW9uc3RydW87XG4gICAgcHJpdmF0ZSBfaWRJbnRlcnZhbG9BdGFxdWU6IG51bWJlcjtcblxuICAgIHB1YmxpYyBnZXQgcG9zaWNpb24oKTogUHVudG8geyByZXR1cm4gdGhpcy5fcG9zaWNpb247IH1cblxuICAgIHB1YmxpYyBvYnNlcnZhcihtb25zdHJ1b3M6IE1vbnN0cnVvW10pIHtcbiAgICAgICAgY29uc3QgZW5SYW5nbyA9IChwOiBQdW50bykgPT4gXG4gICAgICAgICAgICBwLmRpc3RhbmNpYSh0aGlzLl9wb3NpY2lvbikgPj0gdGhpcy5fcmFuZ287XG5cbiAgICAgICAgY29uc3Qgb2JqZXRpdm8gPSBtb25zdHJ1b3NcbiAgICAgICAgICAgIC5maWx0ZXIobSA9PiBtLmVzdGFWaXZvKVxuICAgICAgICAgICAgLmZpbmQobSA9PiBlblJhbmdvKG0ucG9zaWNpb24pKTtcblxuICAgICAgICB0aGlzLmNhbWJpYXJPYmpldGl2byhvYmpldGl2byk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYW1iaWFyT2JqZXRpdm8obnVldm9PYmpldGl2bzogTW9uc3RydW8pIHtcbiAgICAgICAgdGhpcy5fb2JqZXRpdm8gPSBudWV2b09iamV0aXZvO1xuXG4gICAgICAgIGlmIChudWV2b09iamV0aXZvID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0ZW5lckF0YXF1ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IFxuXG4gICAgICAgIHRoaXMuY29tZW56YXJBdGFxdWUoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbWVuemFyQXRhcXVlKCkge1xuICAgICAgICB0aGlzLmRldGVuZXJBdGFxdWUoKTtcblxuICAgICAgICB0aGlzLl9pZEludGVydmFsb0F0YXF1ZSA9IHNldEludGVydmFsKFxuICAgICAgICAgICAgKCkgPT4gdGhpcy5hdGFjYXJPYmpldGl2bygpLFxuICAgICAgICAgICAgdGhpcy5fdGlwb0F0YXF1ZS5jYWRlbmNpYURlVGlybylcbiAgICB9XG5cbiAgICBwcml2YXRlIGRldGVuZXJBdGFxdWUoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faWRJbnRlcnZhbG9BdGFxdWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgYXRhY2FyT2JqZXRpdm8oKSB7XG4gICAgICAgIHRoaXMuX29iamV0aXZvLnJlY2liaXJEYW5pbyh0aGlzLl90aXBvQXRhcXVlLmZ1ZXJ6YSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX29iamV0aXZvLnZpZGEgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5kZXRlbmVyQXRhcXVlKCk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiZXhwb3J0IGNvbnN0IGdhbWVDb25maWcgPSB7XG4gICAgaW50ZXJ2YWxvOiAxMDAwLFxuICAgIG9sZWFkYXM6IFtcbiAgICAgICAgeyB2ZWxvY2lkYWQ6IDEsIHZpZGE6IDcsIGNhbnRpZGFkOiAxMCB9LFxuICAgICAgICB7IHZlbG9jaWRhZDogMSwgdmlkYTogOSwgY2FudGlkYWQ6IDEyIH1cbiAgICBdIGFzIE9sZWFkYVtdLFxuICAgIHZpZGFKdWdhZG9yOiAxMFxufVxuXG5pbnRlcmZhY2UgT2xlYWRhIHtcbiAgICB2ZWxvY2lkYWQ6IG51bWJlcixcbiAgICB2aWRhOiBudW1iZXIsXG4gICAgY2FudGlkYWQ6IG51bWJlclxufSIsImltcG9ydCB7IFB1bnRvIH0gZnJvbSBcIi4vcHVudG9cIjtcbmltcG9ydCB7IGdhbWVDb25maWcgfSBmcm9tIFwiLi9jb25maWdcIjtcblxuZXhwb3J0IGNsYXNzIE1vbnN0cnVvIHtcbiAgICBjb25zdHJ1Y3RvciAoXG4gICAgICAgIHByaXZhdGUgX3ZlbG9jaWRhZDogbnVtYmVyLCAvL2NlbGRhcyBwb3IgZnJhbWVcbiAgICAgICAgcHJpdmF0ZSBfdmlkYTogbnVtYmVyLFxuICAgICAgICBwcml2YXRlIF9jYW1pbm86IFB1bnRvW10gLypzZWN1ZW5jaWEgZGUgcHVudG9zIG9yZGVuYWRvc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlIGZvcm1hbiBlbCBjYW1pbm8qL1xuICAgICkge1xuICAgICAgICB0aGlzLl9pbmRpY2VQb3NpY2lvbiA9IDA7XG4gICAgICAgIHRoaXMuX3Bvc2ljaW9uID0gdGhpcy5fY2FtaW5vWzBdO1xuICAgICAgICB0aGlzLl9hdGFjYSA9IGZhbHNlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZXN0YVZpdm8oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnZpZGEgPiAwOyB9XG5cbiAgICBwdWJsaWMgZ2V0IHZpZGEoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZpZGE7XG4gICAgfVxuXG4gICAgcHVibGljIGNvbWVuemFyTW92aW1pZW50bygpIHsgLypTZSBsbGFtYSBkZXNkZSBqdWVnbyovXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faWRJbnRlcnZhbG9Nb3ZpbWllbnRvKTtcbiAgICAgICAgdGhpcy5faWRJbnRlcnZhbG9Nb3ZpbWllbnRvID0gc2V0SW50ZXJ2YWwoXG4gICAgICAgICAgICAoKSA9PiB0aGlzLm1vdmVyKCksXG4gICAgICAgICAgICBnYW1lQ29uZmlnLmludGVydmFsbyAvLzEgZnBzXG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlY2liaXJEYW5pbyhkYW5pbzogbnVtYmVyKSB7IC8qU2UgbGxhbWEgZGVzZGUgdG9ycmUqL1xuICAgICAgICB0aGlzLl92aWRhIC09IGRhbmlvO1xuICAgICAgICBpZiAodGhpcy5fdmlkYSA8PSAwKSB7XG4gICAgICAgICAgICB0aGlzLm1vcmlyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIF9wb3NpY2lvbjogUHVudG87IC8vcG9zaWNpb25cbiAgICBwdWJsaWMgZ2V0IHBvc2ljaW9uKCk6IFB1bnRvIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2ljaW9uO1xuICAgIH1cbiAgICBwcml2YXRlIF9hdGFjYTogYm9vbGVhbjtcbiAgICBwdWJsaWMgZ2V0IGF0YWNhKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXRhY2E7XG4gICAgfVxuICAgIHByaXZhdGUgX2luZGljZVBvc2ljaW9uOiBudW1iZXI7IC8vaW5kaWNlIGRlIHBvc2ljaW9uIGVuIGVsIGNhbWlub1xuICAgIHByaXZhdGUgX2lkSW50ZXJ2YWxvTW92aW1pZW50bzogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBtb3ZlcigpIHtcbiAgICAgICAgdGhpcy5faW5kaWNlUG9zaWNpb24gKz0gdGhpcy5fdmVsb2NpZGFkO1xuICAgICAgICBpZiAodGhpcy5faW5kaWNlUG9zaWNpb24gPj0gdGhpcy5fY2FtaW5vLmxlbmd0aCkgeyAvL2ZpbmFsIGRlbCBjYW1pbm9cbiAgICAgICAgICAgIHRoaXMubW9yaXIoKTtcbiAgICAgICAgICAgIHRoaXMuX2F0YWNhID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wb3NpY2lvbiA9IHRoaXMuX2NhbWlub1t0aGlzLl9pbmRpY2VQb3NpY2lvbl07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3JpcigpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pZEludGVydmFsb01vdmltaWVudG8pO1xuICAgICAgICB0aGlzLl9wb3NpY2lvbiA9IG5ldyBQdW50bygtMSwgLTEpOyAvKlJvb20gb2YgRG9vbVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTYWxlIGRlIHBhbnRhbGxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZhbHRhIG1ldG9kbyBkZSBpbXByZXNpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW4gcGFudGFsbGEuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbiBvYnNlcnZhYmxlIHN1cG9uZ28uKi9cbiAgICB9XG59XG5cbiIsImV4cG9ydCBjbGFzcyBUaXBvQXRhcXVlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGZ1ZXJ6YTogbnVtYmVyLFxuICAgICAgICBwdWJsaWMgY2FkZW5jaWFEZVRpcm86IG51bWJlclxuICAgICkge31cbn0iLCJpbXBvcnQgeyBNb25zdHJ1byB9IGZyb20gXCIuL21vbnN0cnVvXCI7XG5pbXBvcnQgeyBUb3JyZSB9IGZyb20gXCIuL3RvcnJlXCI7XG5cbmV4cG9ydCBjbGFzcyBFc2NlbmEge1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9jb250ZW5lZG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuX2NvbnRlbmVkb3Iuc3R5bGUuYm9yZGVyID0gXCIxcHggc29saWQgYmxhY2tcIjtcbiAgICAgICAgdGhpcy5fY29udGVuZWRvci5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgIHRoaXMuX2NvbnRlbmVkb3Iuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUnO1xuICAgICAgICB0aGlzLl9jb250ZW5lZG9yLnN0eWxlLmZvbnRGYW1pbHkgPSAnbW9ub3NwYWNlJztcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZCh0aGlzLl9jb250ZW5lZG9yKTtcbiAgICAgICAgXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfY29udGVuZWRvcjogSFRNTERpdkVsZW1lbnQ7XG4gICAgXG4gICAgcHVibGljIGRpYnVqYXJFc2NlbmEobWFwYTogbnVtYmVyW11bXSwgbW9uc3RydW9zOiBNb25zdHJ1b1tdLCB0b3JyZXM6IFRvcnJlW10pIFxuICAgIHtcbiAgICAgICAgbGV0IHRhYmxlcm8gPSB0aGlzLmRpYnVqYXJDYW1pbm8obWFwYSk7XG5cbiAgICAgICAgdGFibGVybyA9IHRoaXMuZGlidWphck1vbnN0cnVvcyh0YWJsZXJvLCBtb25zdHJ1b3MpO1xuXG4gICAgICAgIHRhYmxlcm8gPSB0aGlzLmRpYnVqYXJUb3JyZXModGFibGVybywgdG9ycmVzKTtcblxuICAgICAgICB0aGlzLmltcHJpbWlyRXNjZW5hKHRhYmxlcm8pO1xuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgcHJpdmF0ZSBkaWJ1amFyQ2FtaW5vKG1hcGE6IG51bWJlcltdW10pOiBzdHJpbmdbXVtdIHtcbiAgICAgICAgY29uc3QgcGFyc2U6IFRvQXNjaWk8bnVtYmVyPiA9IHggPT4geCA9PSAwID8gJ+KWoCcgOiAnICc7XG5cbiAgICAgICAgcmV0dXJuIG1hcGEubWFwKHggPT4geC5tYXAocGFyc2UpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRpYnVqYXJUb3JyZXModGFibGVybzogc3RyaW5nW11bXSwgdG9ycmVzOiBUb3JyZVtdKTogc3RyaW5nW11bXSB7XG4gICAgICAgIGNvbnN0IHBhcnNlOiBUb0FzY2lpPFRvcnJlPiA9IHQgPT4gJ1QnO1xuXG4gICAgICAgIGxldCBudWV2b1RhYmxlcm8gPSBbLi4udGFibGVyb107XG4gICAgICAgIFxuICAgICAgICB0b3JyZXMuZm9yRWFjaChcbiAgICAgICAgICAgIHQgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG51ZXZvVGFibGVyb1t0LnBvc2ljaW9uLnldW3QucG9zaWNpb24ueF0gPSBwYXJzZSh0KVxuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3RvcnJlIG5vIHB1ZG8gc2VyIGRpYnVqYWRhJywgdCkgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbnVldm9UYWJsZXJvO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGlidWphck1vbnN0cnVvcyh0YWJsZXJvOiBzdHJpbmdbXVtdLCBtb25zdHJ1b3M6IE1vbnN0cnVvW10pOiBzdHJpbmdbXVtdIHtcbiAgICAgICAgY29uc3QgcGFyc2U6IFRvQXNjaWk8TW9uc3RydW8+ID0gbSA9PiBtLnZpZGEudG9TdHJpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBudWV2b1RhYmxlcm8gPSBbLi4udGFibGVyb107XG5cbiAgICAgICAgbW9uc3RydW9zLmZvckVhY2goXG4gICAgICAgICAgICBtID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBudWV2b1RhYmxlcm9bbS5wb3NpY2lvbi55XVttLnBvc2ljaW9uLnhdID0gcGFyc2UobSlcbiAgICAgICAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdtb25zdHJ1byBubyBwdWRvIHNlciBkaWJ1amFkbycsIG0pO1xuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gbnVldm9UYWJsZXJvO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW1wcmltaXJFc2NlbmEodGFibGVybzogc3RyaW5nW11bXSk6IHZvaWQge1xuICAgICAgICB0aGlzLl9jb250ZW5lZG9yLmlubmVyVGV4dCA9IHRhYmxlcm8ubWFwKFxuICAgICAgICAgICAgZmlsYSA9PiBmaWxhLmpvaW4oJycpKS5qb2luKCdcXG4nKTtcblxuICAgICAgICBjb25zb2xlLmxvZyh0YWJsZXJvLm1hcChcbiAgICAgICAgICAgIGZpbGEgPT4gZmlsYS5qb2luKCcnKSkuam9pbignXFxuJykpO1xuICAgIH1cbn1cblxudHlwZSBUb0FzY2lpPFQ+ID0gKHg6IFQpID0+IHN0cmluZzsiLCJpbXBvcnQgeyBQdW50byB9IGZyb20gXCIuL3B1bnRvXCI7XG5pbXBvcnQgeyBUb3JyZSB9IGZyb20gXCIuL3RvcnJlXCI7XG5pbXBvcnQgeyBNb25zdHJ1byB9IGZyb20gXCIuL21vbnN0cnVvXCI7XG5pbXBvcnQgeyBUaXBvQXRhcXVlIH0gZnJvbSBcIi4vdGlwb0F0YXF1ZVwiO1xuaW1wb3J0IHsgZ2FtZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZ1wiO1xuaW1wb3J0IHsgRXNjZW5hIH0gZnJvbSBcIi4vZXNjZW5hXCI7XG5cbi8vPT09PT09PUNPTEVDQ0lPTiBERSBNQVBBUz09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIGxldCBtYXBhMiA9IFtcbi8vICAgICAgICAgICAgIFsnUycsJy0nLCdTJywnLScsJy0nLCctJywnLScsJy0nLCctJywnLScsJy0nLCctJywnLScsJ1MnLCctJywnLScsJy0nXVxuLy8gICAgICAgICAgICAsWydTJywnLScsJ1MnLCdTJywnUycsJ1MnLCctJywnLScsJy0nLCctJywnLScsJy0nLCctJywnUycsJy0nLCctJywnLSddXG4vLyAgICAgICAgICAgICxbJ1MnLCctJywnLScsJy0nLCctJywnUycsJ1MnLCctJywnLScsJy0nLCctJywnLScsJ1MnLCdTJywnUycsJ1MnLCctJ11cbi8vICAgICAgICAgICAgLFsnUycsJ1MnLCdTJywnUycsJy0nLCctJywnUycsJy0nLCctJywnLScsJy0nLCctJywnUycsJy0nLCctJywnUycsJy0nXVxuLy8gICAgICAgICAgICAsWyctJywnLScsJy0nLCdTJywnUycsJ1MnLCdTJywnLScsJy0nLCctJywnLScsJy0nLCdTJywnLScsJy0nLCdTJywnLSddXG4vLyAgICAgICAgICAgICxbJy0nLCctJywnLScsJy0nLCctJywnLScsJ1MnLCdTJywnUycsJ1MnLCdTJywnUycsJ1MnLCctJywnLScsJ1MnLCctJ11cbi8vICAgICAgICAgICAgLFsnLScsJ1MnLCdTJywnUycsJ1MnLCctJywnLScsJy0nLCdTJywnLScsJy0nLCctJywnLScsJy0nLCdTJywnUycsJy0nXVxuLy8gICAgICAgICAgICAsWyctJywnUycsJy0nLCctJywnUycsJy0nLCctJywnLScsJ1MnLCctJywnLScsJy0nLCctJywnUycsJ1MnLCctJywnLSddXG4vLyAgICAgICAgICAgICxbJy0nLCdTJywnLScsJy0nLCdTJywnUycsJy0nLCctJywnUycsJy0nLCctJywnLScsJ1MnLCdTJywnLScsJy0nLCctJ11cbi8vICAgICAgICAgICAgLFsnLScsJ1MnLCctJywnLScsJy0nLCdTJywnLScsJy0nLCdTJywnUycsJ1MnLCdTJywnUycsJy0nLCctJywnLScsJy0nXVxuLy8gICAgICAgICAgICAsWyctJywnUycsJy0nLCctJywnLScsJ1MnLCdTJywnUycsJ1MnLCctJywnLScsJy0nLCctJywnLScsJy0nLCctJywnLSddXG4vLyAgICAgICAgIF07XG5cbi8vIGxldCBtYXBhMSA9IFtcbi8vICAgICAgICAgICAgIFsnUzAxJywnLS0tJywnLS0tJywnLS0tJywnLS0tJywnLS0tJ10sXG4vLyAgICAgICAgICAgICBbJ1MwMicsJ1MwMycsJ1MwNCcsJ1MwNScsJ1MwNicsJ1MwNyddLFxuLy8gICAgICAgICAgICAgWyctLS0nLCctLS0nLCctLS0nLCctLS0nLCctLS0nLCdTMDgnXSxcbi8vICAgICAgICAgICAgIFsnUzE1JywnUzE0JywnUzEyJywnUzExJywnUzEwJywnUzA5J10sXG4vLyAgICAgICAgICAgICBbJ1MxNicsJy0tLScsJy0tLScsJy0tLScsJy0tLScsJy0tLSddLFxuLy8gICAgICAgICAgICAgWydTMTcnLCctLS0nLCctLS0nLCctLS0nLCctLS0nLCctLS0nXSxcbi8vICAgICAgICAgICAgIFsnUzE4JywnUzE5JywnUzIwJywnUzIxJywnUzIyJywnUzIzJ10sXG4vLyAgICAgICAgICAgICBbJy0tLScsJy0tLScsJy0tLScsJy0tLScsJy0tLScsJ1MyNCddLFxuLy8gICAgICAgICAgICAgWyctLS0nLCctLS0nLCctLS0nLCctLS0nLCctLS0nLCdTMjUnXSxcbi8vICAgICAgICAgICAgIFsnLS0tJywnLS0tJywnLS0tJywnLS0tJywnLS0tJywnUzI2J10sXG4vLyAgICAgICAgICAgICBbJ1MzMicsJ1MzMScsJ1MzMCcsJ1MyOScsJ1MyOCcsJ1MyNyddLFxuLy8gICAgICAgICAgICAgWydTMzMnLCctLS0nLCctLS0nLCctLS0nLCctLS0nLCctLS0nXSxcbi8vICAgICAgICAgXTtcblxubGV0IG1hcGEzID0gW1xuICAgICAgICAgICAgICAgIFsxLDIsMyw0XSxcbiAgICAgICAgICAgICAgICBbMCwwLDAsNV0sXG4gICAgICAgICAgICAgICAgWzksOCw3LDZdXG5dXG5cbi8vPT09PT09PT09PT09SlVFR089PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNsYXNzIEp1ZWdvIHtcbiAgICBwcml2YXRlIF9tYXBhOiBudW1iZXJbXVtdO1xuICAgIHByaXZhdGUgX2NhbWlubzogUHVudG9bXTsgXG4gICAgcHJpdmF0ZSBfbW9uc3RydW9zOiBNb25zdHJ1b1tdO1xuICAgIHByaXZhdGUgX3RvcnJlczogVG9ycmVbXTtcbiAgICBwcml2YXRlIF9vbGVhZGE6IG51bWJlciA9IDA7XG4gICAgcHJpdmF0ZSBfdmlkYTogbnVtYmVyO1xuICAgIHByaXZhdGUgX2VzY2VuYTogRXNjZW5hO1xuXG4gICAgY29uc3RydWN0b3IobWFwYTogbnVtYmVyW11bXSkge1xuICAgICAgICB0aGlzLl90b3JyZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbW9uc3RydW9zID0gW107XG4gICAgICAgIHRoaXMuX2NhbWlubyA9IFtdO1xuICAgICAgICB0aGlzLl92aWRhID0gZ2FtZUNvbmZpZy52aWRhSnVnYWRvcjtcbiAgICAgICAgdGhpcy5fbWFwYSA9IG1hcGE7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB0aGlzLl9lc2NlbmEgPSBuZXcgRXNjZW5hKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0KCkge1xuICAgICAgICB0aGlzLmxlZXJDYW1pbm8oKTtcblxuICAgICAgICAvL3RoaXMuY3JlYXJUb3JyZShuZXcgUHVudG8oMSwgMCksIDIsIG5ldyBUaXBvQXRhcXVlKDMsIDUwMCkpO1xuICAgICAgICB0aGlzLmNyZWFyVG9ycmUobmV3IFB1bnRvKDEsIDEpLCAyLCBuZXcgVGlwb0F0YXF1ZSgzLCA1MDApKTtcblxuICAgICAgICB0aGlzLmNvbWVuemFyT2xlYWRhKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb21lbnphck9sZWFkYSgpIHtcbiAgICAgICAgdGhpcy5jcmVhck9sZWFkYSgpO1xuICAgICAgICB0aGlzLmNvbWVuemFyTW92aW1pZW50bygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXJPbGVhZGEoKSB7XG4gICAgICAgIGNvbnN0IGRhdG9zID0gZ2FtZUNvbmZpZy5vbGVhZGFzW3RoaXMuX29sZWFkYV07XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRvcy5jYW50aWRhZDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWFyTW9uc3RydW8oZGF0b3MudmVsb2NpZGFkLCBkYXRvcy52aWRhLCB0aGlzLl9jYW1pbm8pOyAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjb21lbnphck1vdmltaWVudG8oKSB7XG4gICAgICAgIGxldCBpbmRpY2VNb25zdHJ1byA9IDA7XG4gICAgICAgIGxldCBpZEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGljZU1vbnN0cnVvIDwgdGhpcy5fbW9uc3RydW9zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vbnN0cnVvc1tpbmRpY2VNb25zdHJ1b10uY29tZW56YXJNb3ZpbWllbnRvKCk7XG4gICAgICAgICAgICAgICAgaW5kaWNlTW9uc3RydW8rKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubm90aWZpY2FyVG9ycmVzKCk7XG5cbiAgICAgICAgICAgIGxldCB0b2Rvc011ZXJ0b3MgPSB0aGlzLl9tb25zdHJ1b3NcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGN1cnIpID0+IGFjYyA9IGFjYyAmJiAhY3Vyci5lc3RhVml2bywgdHJ1ZSk7XG4gICAgICAgICAgICBsZXQgZGFuaW8gPSB0aGlzLl9tb25zdHJ1b3NcbiAgICAgICAgICAgICAgICAucmVkdWNlKChhY2MsIGN1cnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN1cnIuYXRhY2E/IGFjYysrOiBhY2M7XG4gICAgICAgICAgICAgICAgfSwgMCk7IC8qY3VhbnRvcyBtb25zdHJ1b3MgYXRhY2Fyb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWRhIG1vbnN0cnVvIGFwbGljYSAxIGRlIGRhbmlvKi9cbiAgICAgICAgICAgIHRoaXMucmVjaWJpckRhbmlvKGRhbmlvKTtcblxuICAgICAgICAgICAgaWYgKHRvZG9zTXVlcnRvcykge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaWRJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX29sZWFkYSA8IGdhbWVDb25maWcub2xlYWRhcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2xlYWRhKys7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tZW56YXJPbGVhZGEoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlcm1pbmFySnVlZ28odHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2VzY2VuYS5kaWJ1amFyRXNjZW5hKHRoaXMuX21hcGEsdGhpcy5fbW9uc3RydW9zLCB0aGlzLl90b3JyZXMpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5fdmlkYS50b1N0cmluZygpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuX2NhbWlubyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIFxuICAgICAgICB9LCBnYW1lQ29uZmlnLmludGVydmFsbyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZWNpYmlyRGFuaW8oZGFuaW86IG51bWJlcikge1xuICAgICAgICB0aGlzLl92aWRhIC09IGRhbmlvO1xuICAgICAgICBpZiAodGhpcy5fdmlkYSA8PTApIHtcbiAgICAgICAgICAgIHRoaXMudGVybWluYXJKdWVnbyhmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHRlcm1pbmFySnVlZ28odmljdG9yaWE6IGJvb2xlYW4pIHsgY29uc29sZS5sb2coJ0pVRUdPIFRFUk1JTkFETycpIH07XG5cbiAgICBwcml2YXRlIG5vdGlmaWNhclRvcnJlcygpIHtcbiAgICAgICAgdGhpcy5fdG9ycmVzLmZvckVhY2godCA9PiB0Lm9ic2VydmFyKHRoaXMuX21vbnN0cnVvcykpO1xuICAgIH1cblxuICAgIHByaXZhdGUgbXVlc3RyYU1hcGEoKSB7XG4gICAgICAgIC8vUG9yIGltcGxlbWVudGFyLCBkaWJ1amFyIG1vbnN0cnVvcyB5IHRvcnJlc1xuICAgICAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBcbiAgICAgICAgZm9yIChsZXQgcm93IG9mIHRoaXMuX21hcGEpIHtcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sIG9mIHJvdykge1xuICAgICAgICAgICAgICAgIGlmIChjb2wgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQud3JpdGUoJy0nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC53cml0ZSgnICcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQud3JpdGUoXCI8YnIgLz5cIik7XG4gICAgICAgIH0gICAgICAgXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBsZWVyQ2FtaW5vKCkge1xuXG4gICAgICAgIGxldCB4ID0gMDtcbiAgICAgICAgbGV0IHkgPSAwO1xuXG4gICAgICAgIGZvciAobGV0IHJvdyBvZiB0aGlzLl9tYXBhKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAobGV0IGNvbCBvZiByb3cpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29sID09PSAodGhpcy5fY2FtaW5vLmxlbmd0aCArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbWluby5wdXNoKG5ldyBQdW50byh4LCB5KSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGVlckNhbWlubygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5Kys7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBtaXJhIGVsIG1hcGEgeSB2ZSBjdWFsIGVzIGVsIGNhbWlubywgYXNpIHBvZGVtb3MgdGVuZXIgXG4gICAgICAgIHVuYSBjb2xlY2Npb24gZGUgbWFwYXMgeSBzb2xvIGNhbWJpYXIgZGUgbWFwYSwgeSBhc2kgXG4gICAgICAgIHB1ZWRlIGhhYmVyIHVuIGRpc2XDsWFkb3IgZGUgbWFwYXMgcXVlIG5vIG5lY2VzaXRhIFxuICAgICAgICBzYWJlciBuYWRhIGRlbCByZXN0byBkZWwgY29kaWdvIFxuXG4gICAgICAgIHRoaXMuX2NhbWlubyA9IFtdOyAvL1ZhY2lhIGVsIGFycmF5LCBwb3Igc2kgbGFzIG1vc2Nhc1xuICAgICAgICBsZXQgeCA9IC0xO1xuICAgICAgICBsZXQgeSA9IC0xO1xuICAgICAgICBsZXQgcHJldmlvID0gMDsgLyogc2UgcmVmaWVyZSBhbCB2YWxvciB0aXBvIG51bWJlciBcbiAgICAgICAgY29udGVuaWRvIGVuIGxhIGNhc2lsbGEgYW50ZXJpb3IuIExvcyBudW1lcm9zIFxuICAgICAgICBtYXlvcmVzIGEgMCBpbmRpY2FuIGNvcnJlc3BvbmRlbmNpYSBhIGNhbWlubyBcbiAgICAgICAgeSBzdSBpbmRpY2UgXG5cbiAgICAgICAgZm9yIChsZXQgcm93IG9mIHRoaXMuX21hcGEpIHtcbiAgICAgICAgICAgIHkrKztcblxuICAgICAgICAgICAgZm9yIChsZXQgY29sIG9mIHJvdykge1xuICAgICAgICAgICAgICAgIHgrKztcblxuICAgICAgICAgICAgICAgIGlmIChjb2wgIT0gMCkgeyBcbiAgICAgICAgICAgICAgICAgICAgLy8gwr9lcyAhPSBvICE9PT8sIGRpZ28gcG9yIGxvIGRlID09PSBlbnZleiBkZSA9PS5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sID4gcHJldmlvKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW1pbm8ucHVzaChuZXcgUHVudG8oeCwgeSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvbCA8IHByZXZpbykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FtaW5vLnVuc2hpZnQobmV3IFB1bnRvKHgsIHkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBFcnJvcjsgLyogwr9RdWUgaGFjZSBlc3RvIHJlYWxtZW50ZT8gXG4gICAgICAgICAgICAgICAgICAgICAgICBNaSBpbnRlbmNpb24gZXMgcXVlIHNpbXBsZW1lbnRlIGF2aXNlIHF1ZSBhbGdvIFxuICAgICAgICAgICAgICAgICAgICAgICAgZXN0YSBtYWwgcGFyYSBxdWUgbG8gcmV2aXNlbW9zIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9Ki9cbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWFyVG9ycmUocG9zOlB1bnRvLCByYW5nbzpudW1iZXIsIHRpcG9BdGFxdWU6VGlwb0F0YXF1ZSkge1xuICAgICAgICBsZXQgdG9ycmUgPSBuZXcgVG9ycmUocG9zLCByYW5nbywgdGlwb0F0YXF1ZSk7XG4gICAgICAgIHRoaXMuX3RvcnJlcy5wdXNoKHRvcnJlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWFyTW9uc3RydW8odmVsb2NpZGFkOm51bWJlciwgdmlkYTpudW1iZXIsIGNhbWlubzpQdW50b1tdKSB7XG4gICAgICAgIGxldCBtb25zdHJ1byA9IG5ldyBNb25zdHJ1byh2ZWxvY2lkYWQsIHZpZGEsIGNhbWlubyk7XG4gICAgICAgIHRoaXMuX21vbnN0cnVvcy5wdXNoKG1vbnN0cnVvKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgRXNjZW5hIH0gZnJvbSBcIi4vZXNjZW5hXCI7XG5pbXBvcnQgeyBUb3JyZSB9IGZyb20gXCIuL3RvcnJlXCI7XG5pbXBvcnQgeyBQdW50byB9IGZyb20gXCIuL3B1bnRvXCI7XG5pbXBvcnQgeyBUaXBvQXRhcXVlIH0gZnJvbSBcIi4vdGlwb0F0YXF1ZVwiO1xuaW1wb3J0IHsgTW9uc3RydW8gfSBmcm9tIFwiLi9tb25zdHJ1b1wiO1xuaW1wb3J0IHsgSnVlZ28gfSBmcm9tIFwiLi9qdWVnb1wiO1xuXG5cblxuLypjb25zdCBlID0gbmV3IEVzY2VuYSgpO1xuXG4od2luZG93IGFzIGFueSkuZXNjZW5hID0gZTtcblxuKi9cbmNvbnN0IG1hcGEgPSBbXG4gICAgWzEsMiwzLDRdLFxuICAgIFswLDAsMCw1XSxcbiAgICBbOSw4LDcsNl1cbl07XG5cbmxldCBqdWVnbyA9IG5ldyBKdWVnbyhtYXBhKTtcblxuLypcbmNvbnN0IGNhbWlub0RlUHVudG9zID0gW107XG5mb3IgKGxldCBpID0gMDsgaSA8IGNhbWluby5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2FtaW5vW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBjYW1pbm9baV1bal1cbiAgICAgICAgaWYgKGVsZW1lbnQgIT0gMCkge1xuICAgICAgICAgICAgY2FtaW5vRGVQdW50b3MucHVzaChuZXcgUHVudG8oaSwgaikpO1xuICAgICAgICB9IFxuICAgIH1cbn1cblxuY29uc3QgdG9ycmUgPSBuZXcgVG9ycmUobmV3IFB1bnRvKDEsMSksIDMsIG5ldyBUaXBvQXRhcXVlKDUsIDQ0NCkpO1xuXG5jb25zdCBtb25zdHJ1byA9IG5ldyBNb25zdHJ1bygxLCA0LCBjYW1pbm9EZVB1bnRvcyk7XG5cbmUuZGlidWphckVzY2VuYShjYW1pbm8sIFttb25zdHJ1b10sIFt0b3JyZV0pOyovXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n")}]);